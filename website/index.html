<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alice AI - Your Personal Crypto AI Assistant ğŸ’</title>
    
    <!-- Web3 -->
    <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Language Switcher */
        .lang-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            padding: 10px 20px;
            border: 2px solid #F7931A;
            background: white;
            color: #F7931A;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .lang-btn:hover, .lang-btn.active {
            background: #F7931A;
            color: white;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(135deg, #FFF5E6 0%, #FFE4B5 100%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: 'â‚¿';
            position: absolute;
            font-size: 35em;
            color: rgba(247, 147, 26, 0.03);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-15deg);
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 900px;
            padding: 40px 20px;
        }

        .hero-image {
            width: 350px;
            height: 350px;
            margin: 0 auto 50px;
            animation: float 3s ease-in-out infinite;
        }

        .hero-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 25px 50px rgba(247, 147, 26, 0.25));
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-25px); }
        }

        .hero h1 {
            font-size: 4em;
            margin-bottom: 25px;
            color: #F7931A;
            font-weight: 900;
            letter-spacing: -1px;
        }

        .hero .tagline {
            font-size: 2em;
            margin-bottom: 50px;
            color: #555;
            font-weight: 400;
        }

        /* Wallet Section */
        .wallet-section {
            margin-top: 40px;
        }

        .connect-wallet-btn {
            display: inline-block;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 18px 60px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 1.3em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 12px 35px rgba(76, 175, 80, 0.35);
            border: none;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .connect-wallet-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 18px 50px rgba(76, 175, 80, 0.5);
        }

        .wallet-info {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .wallet-address {
            font-size: 1.1em;
            color: #666;
            word-break: break-all;
            margin-bottom: 15px;
        }

        .wallet-balance {
            font-size: 1.3em;
            color: #F7931A;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .bind-telegram-btn {
            background: linear-gradient(135deg, #0088cc 0%, #006699 100%);
            color: white;
            padding: 15px 50px;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(0, 136, 204, 0.3);
        }

        .bind-telegram-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 136, 204, 0.5);
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #F7931A 0%, #FFD700 100%);
            color: white;
            padding: 22px 70px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 1.4em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 12px 35px rgba(247, 147, 26, 0.35);
        }

        .cta-button:hover {
            transform: translateY(-8px);
            box-shadow: 0 18px 50px rgba(247, 147, 26, 0.5);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
        }

        .modal-content {
            background: white;
            margin: 10% auto;
            padding: 40px;
            border-radius: 25px;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-content h3 {
            font-size: 2em;
            color: #F7931A;
            margin-bottom: 20px;
            text-align: center;
        }

        .bind-code-box {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }

        .bind-code {
            font-size: 1.8em;
            font-weight: bold;
            color: #F7931A;
            letter-spacing: 2px;
            margin: 15px 0;
            font-family: monospace;
        }

        .copy-btn {
            background: #4CAF50;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .modal-instructions {
            text-align: left;
            margin: 20px 0;
            line-height: 2;
        }

        .modal-instructions p {
            margin: 10px 0;
            font-size: 1.1em;
            color: #555;
        }

        .open-telegram-btn {
            background: linear-gradient(135deg, #0088cc 0%, #006699 100%);
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .open-telegram-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 136, 204, 0.4);
        }

        .close-modal {
            color: #aaa;
            float: right;
            font-size: 2em;
            font-weight: bold;
            cursor: pointer;
            line-height: 20px;
        }

        .close-modal:hover {
            color: #000;
        }

        /* Features Section */
        .features {
            padding: 100px 20px;
            background: white;
        }

        .features h2 {
            text-align: center;
            font-size: 3em;
            margin-bottom: 70px;
            color: #F7931A;
            font-weight: 800;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .feature-item {
            text-align: center;
            padding: 30px 20px;
        }

        .feature-item .icon {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .feature-item h3 {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 10px;
        }

        .feature-item .status {
            font-size: 0.9em;
            color: #999;
        }

        .feature-item .status.ready {
            color: #4CAF50;
        }

        /* Tiers Section */
        .tiers {
            padding: 100px 20px;
            background: linear-gradient(135deg, #FFF5E6 0%, #FFE4B5 100%);
        }

        .tiers h2 {
            text-align: center;
            font-size: 3em;
            margin-bottom: 70px;
            color: #F7931A;
            font-weight: 800;
        }

        .tier-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .tier-card {
            background: white;
            padding: 40px 30px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .tier-card:hover {
            transform: translateY(-10px);
        }

        .tier-card.featured {
            border: 3px solid #F7931A;
            box-shadow: 0 15px 50px rgba(247, 147, 26, 0.3);
        }

        .tier-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .tier-icon {
            font-size: 3.5em;
            margin-bottom: 15px;
        }

        .tier-name {
            font-size: 1.8em;
            font-weight: 800;
            color: #F7931A;
            margin-bottom: 10px;
        }

        .tier-price {
            font-size: 1.1em;
            color: #666;
        }

        .tier-features {
            list-style: none;
            padding: 0;
        }

        .tier-features li {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            color: #555;
            font-size: 1em;
        }

        .tier-features li:last-child {
            border-bottom: none;
        }

        .tier-features li::before {
            content: 'âœ“';
            color: #F7931A;
            font-weight: bold;
            margin-right: 10px;
        }

        .tier-features li.coming-soon {
            color: #999;
        }

        .tier-features li.coming-soon::before {
            content: 'â³';
        }

        /* Token Economics Section */
        .token-economics {
            padding: 100px 20px;
            background: white;
        }

        .token-economics h2 {
            text-align: center;
            font-size: 3em;
            margin-bottom: 70px;
            color: #F7931A;
            font-weight: 800;
        }

        .token-card {
            max-width: 900px;
            margin: 0 auto;
            background: linear-gradient(135deg, #FFF5E6 0%, #FFE4B5 100%);
            padding: 50px;
            border-radius: 25px;
            box-shadow: 0 15px 50px rgba(247, 147, 26, 0.2);
        }

        .token-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .token-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .token-card h3 {
            font-size: 2.5em;
            color: #F7931A;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .token-status {
            font-size: 1.2em;
            color: #666;
        }

        .token-content {
            text-align: left;
        }

        .economics-section {
            margin-bottom: 50px;
        }

        .economics-section:last-child {
            margin-bottom: 0;
        }

        .economics-section h4 {
            font-size: 1.6em;
            color: #F7931A;
            margin-bottom: 30px;
            font-weight: 700;
        }

        .tax-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 25px;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .tax-item:last-child {
            margin-bottom: 0;
        }

        .tax-percent {
            font-size: 1.8em;
            font-weight: 800;
            color: #F7931A;
            min-width: 100px;
            padding-right: 20px;
        }

        .tax-desc {
            flex: 1;
        }

        .tax-desc strong {
            display: block;
            font-size: 1.2em;
            color: #333;
            margin-bottom: 8px;
        }

        .tax-desc p {
            margin: 4px 0;
            color: #666;
            line-height: 1.6;
        }

        .payment-info {
            padding: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .payment-info p {
            color: #666;
            line-height: 1.8;
            margin: 0;
        }

        /* Footer */
        .footer {
            padding: 80px 20px;
            text-align: center;
            background: #2C2C2C;
            color: white;
        }

        .footer h2 {
            font-size: 2.5em;
            margin-bottom: 30px;
        }

        .footer p {
            font-size: 1.2em;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.8em;
            }

            .hero .tagline {
                font-size: 1.5em;
            }

            .hero-image {
                width: 250px;
                height: 250px;
            }

            .features h2, .tiers h2, .token-economics h2 {
                font-size: 2.2em;
            }

            .tier-grid {
                grid-template-columns: 1fr;
            }

            .token-card {
                padding: 30px 20px;
            }

            .tax-item {
                flex-direction: column;
            }

            .tax-percent {
                min-width: auto;
                padding-right: 0;
                margin-bottom: 10px;
            }

            .modal-content {
                margin: 20% 20px;
                padding: 30px 20px;
            }

            .lang-switcher {
                top: 10px;
                right: 10px;
            }

            .lang-btn {
                padding: 8px 15px;
                font-size: 0.9em;
            }
        }

        .hidden {
            display: none;
        }

        /* Wallet Selector Modal */
        .wallet-overlay {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }

        .wallet-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wallet-modal {
            background: white;
            border-radius: 25px;
            max-width: 460px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideDown 0.3s ease;
            padding: 30px;
        }

        .wallet-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .wallet-modal-header h3 {
            font-size: 1.5em;
            color: #333;
            margin: 0;
        }

        .wallet-modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: #f0f0f0;
            color: #666;
            font-size: 1.3em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .wallet-modal-close:hover {
            background: #e0e0e0;
            color: #333;
        }

        .wallet-option {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            margin: 8px 0;
            border: 2px solid #f0f0f0;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .wallet-option:hover {
            border-color: #F7931A;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(247, 147, 26, 0.15);
        }

        .wallet-option-icon {
            font-size: 2em;
            margin-right: 16px;
            width: 44px;
            text-align: center;
            flex-shrink: 0;
        }

        .wallet-option-info {
            flex: 1;
        }

        .wallet-option-name {
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
        }

        .wallet-option-desc {
            font-size: 0.8em;
            color: #999;
            margin-top: 2px;
        }

        .wallet-option-arrow {
            color: #ccc;
            font-size: 1.2em;
            flex-shrink: 0;
        }

        .wallet-option:hover .wallet-option-arrow {
            color: #F7931A;
        }

        .wallet-divider {
            display: flex;
            align-items: center;
            margin: 16px 0;
            color: #ccc;
            font-size: 0.85em;
        }

        .wallet-divider::before,
        .wallet-divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid #eee;
        }

        .wallet-divider span {
            padding: 0 12px;
        }

        /* WalletConnect QR Modal */
        .qr-modal {
            background: white;
            border-radius: 25px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideDown 0.3s ease;
            padding: 30px;
            text-align: center;
        }

        .qr-modal h3 {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 8px;
        }

        .qr-modal p {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .qr-modal img {
            max-width: 260px;
            width: 100%;
            border-radius: 12px;
        }

        .qr-modal .qr-loading {
            padding: 60px 0;
            color: #999;
            font-size: 1.1em;
        }

        .qr-modal .qr-loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #F7931A;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-left: 10px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .wallet-modal {
                width: 95%;
                margin: 0 10px;
                padding: 24px 18px;
                max-height: 80vh;
            }

            .wallet-option {
                padding: 14px 16px;
            }

            .wallet-option-icon {
                font-size: 1.7em;
                width: 38px;
                margin-right: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="lang-switcher">
        <button class="lang-btn active" onclick="setLanguage('zh')" data-lang="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
        <button class="lang-btn" onclick="setLanguage('en')" data-lang="en">ğŸ‡¬ğŸ‡§ English</button>
    </div>

    <!-- Bind Modal -->
    <div id="bindModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeBindModal()">&times;</span>
            <h3 data-i18n="bind-title">ç»‘å®šä½ çš„ Telegram</h3>
            
            <div class="bind-code-box">
                <p data-i18n="bind-your-code">ä½ çš„ç»‘å®šç ï¼š</p>
                <div class="bind-code" id="bindCode">Loading...</div>
                <button class="copy-btn" onclick="copyBindCode()" data-i18n="copy-button">ğŸ“‹ å¤åˆ¶ç»‘å®šç </button>
            </div>
            
            <div class="modal-instructions">
                <p data-i18n="bind-step1">1. ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ‰“å¼€ Telegram Bot</p>
                <p data-i18n="bind-step2">2. å‘é€ä½ åˆšå¤åˆ¶çš„ç»‘å®šç </p>
                <p data-i18n="bind-step3">3. ç­‰å¾… Bot ç¡®è®¤ç»‘å®šæˆåŠŸ</p>
            </div>
            
            <button class="open-telegram-btn" onclick="openTelegram()" data-i18n="open-telegram">
                æ‰“å¼€ Telegram Bot â†’
            </button>
        </div>
    </div>

    <!-- Wallet Selector Modal -->
    <div id="walletSelector" class="wallet-overlay" onclick="if(event.target===this)closeWalletSelector()">
        <div class="wallet-modal">
            <div class="wallet-modal-header">
                <h3 id="walletSelectorTitle">é€‰æ‹©é’±åŒ…</h3>
                <button class="wallet-modal-close" onclick="closeWalletSelector()">&times;</button>
            </div>

            <div onclick="selectWallet('metamask')" class="wallet-option">
                <div class="wallet-option-icon">ğŸ¦Š</div>
                <div class="wallet-option-info">
                    <div class="wallet-option-name">MetaMask</div>
                    <div class="wallet-option-desc" data-wallet-desc="metamask">æµè§ˆå™¨æ‰©å±• / App</div>
                </div>
                <div class="wallet-option-arrow">â€º</div>
            </div>

            <div onclick="selectWallet('binance')" class="wallet-option">
                <div class="wallet-option-icon">ğŸŸ¡</div>
                <div class="wallet-option-info">
                    <div class="wallet-option-name">Binance Wallet</div>
                    <div class="wallet-option-desc" data-wallet-desc="binance">å¸å®‰é’±åŒ…</div>
                </div>
                <div class="wallet-option-arrow">â€º</div>
            </div>

            <div onclick="selectWallet('okx')" class="wallet-option">
                <div class="wallet-option-icon">âš«</div>
                <div class="wallet-option-info">
                    <div class="wallet-option-name">OKX Wallet</div>
                    <div class="wallet-option-desc" data-wallet-desc="okx">OKX é’±åŒ…</div>
                </div>
                <div class="wallet-option-arrow">â€º</div>
            </div>

            <div class="wallet-divider"><span id="walletDividerText">æ›´å¤šé’±åŒ…</span></div>

            <div onclick="selectWallet('trust')" class="wallet-option">
                <div class="wallet-option-icon">ğŸ”µ</div>
                <div class="wallet-option-info">
                    <div class="wallet-option-name">Trust Wallet</div>
                    <div class="wallet-option-desc" data-wallet-desc="trust">Trust é’±åŒ…</div>
                </div>
                <div class="wallet-option-arrow">â€º</div>
            </div>

            <div onclick="selectWallet('tokenpocket')" class="wallet-option">
                <div class="wallet-option-icon">ğŸ’¼</div>
                <div class="wallet-option-info">
                    <div class="wallet-option-name">TokenPocket</div>
                    <div class="wallet-option-desc" data-wallet-desc="tokenpocket">TokenPocket é’±åŒ…</div>
                </div>
                <div class="wallet-option-arrow">â€º</div>
            </div>

            <div onclick="selectWallet('imtoken')" class="wallet-option">
                <div class="wallet-option-icon">ğŸ’°</div>
                <div class="wallet-option-info">
                    <div class="wallet-option-name">imToken</div>
                    <div class="wallet-option-desc" data-wallet-desc="imtoken">imToken é’±åŒ…</div>
                </div>
                <div class="wallet-option-arrow">â€º</div>
            </div>
        </div>
    </div>

    <!-- WalletConnect QR Modal -->
    <div id="qrOverlay" class="wallet-overlay" onclick="if(event.target===this)closeQrModal()">
        <div class="qr-modal">
            <div class="wallet-modal-header">
                <h3 id="qrTitle">æ‰«ç è¿æ¥</h3>
                <button class="wallet-modal-close" onclick="closeQrModal()">&times;</button>
            </div>
            <p id="qrDesc">è¯·ç”¨æ‰‹æœºé’±åŒ…æ‰«æäºŒç»´ç </p>
            <div id="qrContent">
                <div class="qr-loading" id="qrLoading">æ­£åœ¨ç”ŸæˆäºŒç»´ç </div>
                <img id="qrImage" style="display:none" alt="QR Code" />
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-image">
                <img src="alice-logo.png" alt="Alice.AI" />
            </div>
            <h1>Alice AI</h1>
            <p class="tagline" data-i18n="tagline">ä½ çš„ä¸“å±åŠ å¯†è´§å¸ AI åŠ©ç†</p>
            
            <!-- Wallet Section -->
            <div class="wallet-section">
                <div id="connectSection">
                    <button class="connect-wallet-btn" onclick="connectWallet()" data-i18n="connect-wallet">
                        ğŸ”— è¿æ¥é’±åŒ…
                    </button>
                </div>
                
                <div id="walletInfo" class="hidden">
                    <div class="wallet-info">
                        <div class="wallet-address">
                            <span data-i18n="wallet-address">é’±åŒ…åœ°å€ï¼š</span>
                            <span id="address">0x...</span>
                        </div>
                        <div class="wallet-balance">
                            <span data-i18n="token-balance">Alice Tokenï¼š</span>
                            <span id="balance">0</span>
                        </div>
                        <button class="bind-telegram-btn" onclick="openBindModal()" data-i18n="bind-telegram">
                            ç»‘å®š Telegram
                        </button>
                    </div>
                </div>
            </div>
            
            <a href="https://t.me/Alice102_bot" class="cta-button" data-i18n="start-now">ç«‹å³å¼€å§‹ â†’</a>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <h2 data-i18n="features-title">æ ¸å¿ƒç‰¹è‰²</h2>
            <div class="feature-grid">
                <div class="feature-item">
                    <div class="icon">ğŸ¤–</div>
                    <h3 data-i18n="feature1-title">ä¸ªäºº AI åŠ©ç†</h3>
                    <p class="status" data-i18n="feature1-desc">ä¸“å±é™ªä¼´</p>
                </div>

                <div class="feature-item">
                    <div class="icon">ğŸ§ </div>
                    <h3 data-i18n="feature2-title">è¿ç»­è®°å¿†</h3>
                    <p class="status" data-i18n="feature2-desc">è®°ä½ä½ çš„æ¯æ¬¡å¯¹è¯</p>
                </div>

                <div class="feature-item">
                    <div class="icon">ğŸ’¬</div>
                    <h3 data-i18n="feature3-title">Telegram Bot</h3>
                    <p class="status ready" data-i18n="feature3-desc">âœ“ å·²å°±ç»ª</p>
                </div>

                <div class="feature-item">
                    <div class="icon">ğŸ’š</div>
                    <h3 data-i18n="feature4-title">WeChat Bot</h3>
                    <p class="status" data-i18n="feature4-desc">å³å°†æ¨å‡º</p>
                </div>

                <div class="feature-item">
                    <div class="icon">âœ¨</div>
                    <h3 data-i18n="feature5-title">å®Œå…¨æ™ºèƒ½</h3>
                    <p class="status" data-i18n="feature5-desc">ç§äºº AI åŠ©æ‰‹</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Tiers Section -->
    <section class="tiers">
        <div class="container">
            <h2 data-i18n="tiers-title">æœåŠ¡ç­‰çº§</h2>
            <div class="tier-grid">
                <!-- Bronze Tier -->
                <div class="tier-card">
                    <div class="tier-header">
                        <div class="tier-icon">ğŸ¥‰</div>
                        <div class="tier-name">Bronze</div>
                        <div class="tier-price" data-i18n="tier-bronze-price">å…è´¹</div>
                    </div>
                    <ul class="tier-features">
                        <li data-i18n="tier-bronze-feat1">åŸºç¡€å¯¹è¯åŠŸèƒ½</li>
                        <li data-i18n="tier-bronze-feat2">ç®€å•æŸ¥è¯¢</li>
                        <li data-i18n="tier-bronze-feat3">ä½“éªŒ Alice</li>
                    </ul>
                </div>

                <!-- Silver Tier -->
                <div class="tier-card">
                    <div class="tier-header">
                        <div class="tier-icon">ğŸ¥ˆ</div>
                        <div class="tier-name">Silver</div>
                        <div class="tier-price" data-i18n="tier-silver-price">æŒå¸è§£é”</div>
                    </div>
                    <ul class="tier-features">
                        <li data-i18n="tier-silver-feat1">æ™ºèƒ½ä»·æ ¼ç›‘æ§ï¼ˆ3ä¸ªä»»åŠ¡ï¼‰</li>
                        <li data-i18n="tier-silver-feat2">å¤šç»´åº¦æƒ…æŠ¥åˆ†æ</li>
                        <li data-i18n="tier-silver-feat3">AI ä¸“ä¸šå»ºè®®</li>
                        <li data-i18n="tier-silver-feat4">æ–°é—» + æƒ…ç»ª + è¶‹åŠ¿</li>
                    </ul>
                </div>

                <!-- Gold Tier -->
                <div class="tier-card">
                    <div class="tier-header">
                        <div class="tier-icon">ğŸ¥‡</div>
                        <div class="tier-name">Gold</div>
                        <div class="tier-price" data-i18n="tier-gold-price">å³å°†æ¨å‡º</div>
                    </div>
                    <ul class="tier-features">
                        <li data-i18n="tier-gold-feat1">Silver å…¨éƒ¨åŠŸèƒ½</li>
                        <li data-i18n="tier-gold-feat2">å®Œå…¨æ™ºèƒ½ç§äºº AI åŠ©æ‰‹</li>
                        <li class="coming-soon" data-i18n="tier-gold-feat3">æ¯æ—¥æ·±åº¦ AI æŠ¥å‘Š</li>
                        <li class="coming-soon" data-i18n="tier-gold-feat4">æé€Ÿå“åº”ï¼ˆ2ç§’ï¼‰</li>
                        <li class="coming-soon" data-i18n="tier-gold-feat5">æ— é™ç›‘æ§ä»»åŠ¡</li>
                    </ul>
                </div>

                <!-- Diamond Tier -->
                <div class="tier-card featured">
                    <div class="tier-header">
                        <div class="tier-icon">ğŸ’</div>
                        <div class="tier-name">Diamond</div>
                        <div class="tier-price" data-i18n="tier-diamond-price">å³å°†æ¨å‡º</div>
                    </div>
                    <ul class="tier-features">
                        <li data-i18n="tier-diamond-feat1">Gold å…¨éƒ¨åŠŸèƒ½</li>
                        <li class="coming-soon" data-i18n="tier-diamond-feat2">å…¨è‡ªåŠ¨ Xï¼ˆæ¨ç‰¹ï¼‰æœç´¢</li>
                        <li class="coming-soon" data-i18n="tier-diamond-feat3">å®æ—¶æŠ•èµ„æƒ…ç»ªåˆ†æ</li>
                        <li class="coming-soon" data-i18n="tier-diamond-feat4">X çœŸå®å¤šç©ºæ¯”</li>
                        <li class="coming-soon" data-i18n="tier-diamond-feat5">æŠ€æœ¯æŒ‡æ ‡æ·±åº¦åˆ†æ</li>
                        <li class="coming-soon" data-i18n="tier-diamond-feat6">å…¨è‡ªåŠ¨ä¹°å–</li>
                        <li class="coming-soon" data-i18n="tier-diamond-feat7">X çˆ†ç‚¹ä¸»åŠ¨æ¨é€</li>
                        <li class="coming-soon" data-i18n="tier-diamond-feat8">æ›´å¤šåŠŸèƒ½æ•¬è¯·æœŸå¾…</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Token Economics Section -->
    <section class="token-economics">
        <div class="container">
            <h2 data-i18n="tokenomics-title">ä»£å¸ç»æµ</h2>
            
            <div class="token-card">
                <div class="token-header">
                    <div class="token-icon">ğŸª™</div>
                    <h3>Alice Token</h3>
                    <p class="token-status" data-i18n="token-coming-soon">å³å°†æ¨å‡º</p>
                </div>
                
                <div class="token-content">
                    <div class="economics-section">
                        <h4 data-i18n="tokenomics-tax-title">äº¤æ˜“ç¨æ”¶æœºåˆ¶ï¼ˆ3%ï¼‰</h4>
                        
                        <div class="tax-item">
                            <div class="tax-percent">10%</div>
                            <div class="tax-desc">
                                <strong data-i18n="tax1-title">å¼€å‘å›¢é˜Ÿæ”¶å…¥</strong>
                                <p data-i18n="tax1-detail">ç¨æ”¶çš„ 10%ï¼ˆæ€»äº¤æ˜“é¢çš„ 0.3%ï¼‰</p>
                            </div>
                        </div>
                        
                        <div class="tax-item">
                            <div class="tax-percent">15%</div>
                            <div class="tax-desc">
                                <strong data-i18n="tax2-title">é¡¹ç›®è¿è¥å¼€é”€</strong>
                                <p data-i18n="tax2-desc">API å¯†é’¥ã€ç¡¬ä»¶è®¾å¤‡ã€æœåŠ¡å™¨ç­‰åŸºç¡€è®¾æ–½</p>
                                <p data-i18n="tax2-detail">ç¨æ”¶çš„ 15%ï¼ˆæ€»äº¤æ˜“é¢çš„ 0.45%ï¼‰</p>
                            </div>
                        </div>
                        
                        <div class="tax-item">
                            <div class="tax-percent">25%</div>
                            <div class="tax-desc">
                                <strong data-i18n="tax3-title">BTC å‚¨å¤‡åŸºé‡‘</strong>
                                <p data-i18n="tax3-desc">è‡ªåŠ¨è´­ä¹°æ¯”ç‰¹å¸ä½œä¸ºé¡¹ç›®é•¿æœŸå‚¨å¤‡èµ„äº§</p>
                                <p data-i18n="tax3-detail">ç¨æ”¶çš„ 25%ï¼ˆæ€»äº¤æ˜“é¢çš„ 0.75%ï¼‰</p>
                            </div>
                        </div>
                        
                        <div class="tax-item">
                            <div class="tax-percent">50%</div>
                            <div class="tax-desc">
                                <strong data-i18n="tax4-title">DeFi ç­–ç•¥ä¸å›æŠ¥</strong>
                                <p data-i18n="tax4-desc1">Â· DeFi Bot è‡ªåŠ¨äº¤æ˜“</p>
                                <p data-i18n="tax4-desc2">Â· è´¨æŠ¼åˆ†çº¢æœºåˆ¶</p>
                                <p data-i18n="tax4-desc3">Â· æ‰‹åŠ¨å›è´­ï¼ˆåŒ…æ‹¬ BTC å›è´­ï¼‰</p>
                                <p data-i18n="tax4-desc4">Â· ä¸ºé¡¹ç›®åˆ›é€ é¢å¤–æ”¶ç›Š</p>
                                <p data-i18n="tax4-detail">ç¨æ”¶çš„ 50%ï¼ˆæ€»äº¤æ˜“é¢çš„ 1.5%ï¼‰</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="economics-section">
                        <h4 data-i18n="tokenomics-payment-title">ä»˜è´¹ä½¿ç”¨æ¨¡å¼</h4>
                        <div class="payment-info">
                            <p data-i18n="payment-desc">æœªæ¥å°†å¼€é€šéæŒå¸ç”¨æˆ·çš„ä»˜è´¹è®¢é˜…æœåŠ¡ã€‚æ‰€æœ‰ä»˜è´¹æ”¶å…¥å°†å…¨éƒ¨ç”¨äºé¡¹ç›®ç”Ÿæ€å‘å±•ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºåŠŸèƒ½å‡çº§ã€æŠ€æœ¯ä¼˜åŒ–ã€å¸‚åœºæ¨å¹¿ç­‰ï¼ŒæŒç»­æå‡ Alice AI çš„æœåŠ¡è´¨é‡ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <section class="footer">
        <div class="container">
            <h2 data-i18n="footer-title">å‡†å¤‡å¥½äº†å—ï¼Ÿ</h2>
            <p data-i18n="footer-desc">ç«‹å³å¼€å§‹ä½¿ç”¨ Alice AIï¼Œè®©å¥¹æˆä¸ºä½ çš„ä¸“å±åŠ å¯†è´§å¸åŠ©ç†</p>
            <a href="https://t.me/Alice102_bot" class="cta-button" data-i18n="footer-cta">å¼€å§‹ä½¿ç”¨ â†’</a>
        </div>
    </section>

    <script>
        // Configuration
        const CONFIG = {
            TOKEN_CONTRACT: '0x91b049aef4c677cc3f182237538e91a277037777',
            BSC_CHAIN_ID: '0x38', // BSC Mainnet
            BSC_RPC_URL: 'https://bsc-dataseed.binance.org/',
            TELEGRAM_BOT: 'Alice102_bot'
        };

        // Global variables
        let web3;
        let account;
        let currentLanguage = 'zh';

        // Translations
        const translations = {
            zh: {
                'tagline': 'ä½ çš„ä¸“å±åŠ å¯†è´§å¸ AI åŠ©ç†',
                'connect-wallet': 'ğŸ”— è¿æ¥é’±åŒ…',
                'wallet-address': 'é’±åŒ…åœ°å€ï¼š',
                'token-balance': 'Alice Tokenï¼š',
                'bind-telegram': 'ç»‘å®š Telegram',
                'start-now': 'ç«‹å³å¼€å§‹ â†’',
                'bind-title': 'ç»‘å®šä½ çš„ Telegram',
                'bind-your-code': 'ä½ çš„ç»‘å®šç ï¼š',
                'copy-button': 'ğŸ“‹ å¤åˆ¶ç»‘å®šç ',
                'bind-step1': '1. ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ‰“å¼€ Telegram Bot',
                'bind-step2': '2. å‘é€ä½ åˆšå¤åˆ¶çš„ç»‘å®šç ',
                'bind-step3': '3. ç­‰å¾… Bot ç¡®è®¤ç»‘å®šæˆåŠŸ',
                'open-telegram': 'æ‰“å¼€ Telegram Bot â†’',
                'features-title': 'æ ¸å¿ƒç‰¹è‰²',
                'feature1-title': 'ä¸ªäºº AI åŠ©ç†',
                'feature1-desc': 'ä¸“å±é™ªä¼´',
                'feature2-title': 'è¿ç»­è®°å¿†',
                'feature2-desc': 'è®°ä½ä½ çš„æ¯æ¬¡å¯¹è¯',
                'feature3-title': 'Telegram Bot',
                'feature3-desc': 'âœ“ å·²å°±ç»ª',
                'feature4-title': 'WeChat Bot',
                'feature4-desc': 'å³å°†æ¨å‡º',
                'feature5-title': 'å®Œå…¨æ™ºèƒ½',
                'feature5-desc': 'ç§äºº AI åŠ©æ‰‹',
                'tiers-title': 'æœåŠ¡ç­‰çº§',
                'tier-bronze-price': 'å…è´¹',
                'tier-bronze-feat1': 'åŸºç¡€å¯¹è¯åŠŸèƒ½',
                'tier-bronze-feat2': 'ç®€å•æŸ¥è¯¢',
                'tier-bronze-feat3': 'ä½“éªŒ Alice',
                'tier-silver-price': 'æŒå¸è§£é”',
                'tier-silver-feat1': 'æ™ºèƒ½ä»·æ ¼ç›‘æ§ï¼ˆ3ä¸ªä»»åŠ¡ï¼‰',
                'tier-silver-feat2': 'å¤šç»´åº¦æƒ…æŠ¥åˆ†æ',
                'tier-silver-feat3': 'AI ä¸“ä¸šå»ºè®®',
                'tier-silver-feat4': 'æ–°é—» + æƒ…ç»ª + è¶‹åŠ¿',
                'tier-gold-price': 'å³å°†æ¨å‡º',
                'tier-gold-feat1': 'Silver å…¨éƒ¨åŠŸèƒ½',
                'tier-gold-feat2': 'å®Œå…¨æ™ºèƒ½ç§äºº AI åŠ©æ‰‹',
                'tier-gold-feat3': 'æ¯æ—¥æ·±åº¦ AI æŠ¥å‘Š',
                'tier-gold-feat4': 'æé€Ÿå“åº”ï¼ˆ2ç§’ï¼‰',
                'tier-gold-feat5': 'æ— é™ç›‘æ§ä»»åŠ¡',
                'tier-diamond-price': 'å³å°†æ¨å‡º',
                'tier-diamond-feat1': 'Gold å…¨éƒ¨åŠŸèƒ½',
                'tier-diamond-feat2': 'å…¨è‡ªåŠ¨ Xï¼ˆæ¨ç‰¹ï¼‰æœç´¢',
                'tier-diamond-feat3': 'å®æ—¶æŠ•èµ„æƒ…ç»ªåˆ†æ',
                'tier-diamond-feat4': 'X çœŸå®å¤šç©ºæ¯”',
                'tier-diamond-feat5': 'æŠ€æœ¯æŒ‡æ ‡æ·±åº¦åˆ†æ',
                'tier-diamond-feat6': 'å…¨è‡ªåŠ¨ä¹°å–',
                'tier-diamond-feat7': 'X çˆ†ç‚¹ä¸»åŠ¨æ¨é€',
                'tier-diamond-feat8': 'æ›´å¤šåŠŸèƒ½æ•¬è¯·æœŸå¾…',
                'tokenomics-title': 'ä»£å¸ç»æµ',
                'token-coming-soon': 'å³å°†æ¨å‡º',
                'tokenomics-tax-title': 'äº¤æ˜“ç¨æ”¶æœºåˆ¶ï¼ˆ3%ï¼‰',
                'tax1-title': 'å¼€å‘å›¢é˜Ÿæ”¶å…¥',
                'tax1-detail': 'ç¨æ”¶çš„ 10%ï¼ˆæ€»äº¤æ˜“é¢çš„ 0.3%ï¼‰',
                'tax2-title': 'é¡¹ç›®è¿è¥å¼€é”€',
                'tax2-desc': 'API å¯†é’¥ã€ç¡¬ä»¶è®¾å¤‡ã€æœåŠ¡å™¨ç­‰åŸºç¡€è®¾æ–½',
                'tax2-detail': 'ç¨æ”¶çš„ 15%ï¼ˆæ€»äº¤æ˜“é¢çš„ 0.45%ï¼‰',
                'tax3-title': 'BTC å‚¨å¤‡åŸºé‡‘',
                'tax3-desc': 'è‡ªåŠ¨è´­ä¹°æ¯”ç‰¹å¸ä½œä¸ºé¡¹ç›®é•¿æœŸå‚¨å¤‡èµ„äº§',
                'tax3-detail': 'ç¨æ”¶çš„ 25%ï¼ˆæ€»äº¤æ˜“é¢çš„ 0.75%ï¼‰',
                'tax4-title': 'DeFi ç­–ç•¥ä¸å›æŠ¥',
                'tax4-desc1': 'Â· DeFi Bot è‡ªåŠ¨äº¤æ˜“',
                'tax4-desc2': 'Â· è´¨æŠ¼åˆ†çº¢æœºåˆ¶',
                'tax4-desc3': 'Â· æ‰‹åŠ¨å›è´­ï¼ˆåŒ…æ‹¬ BTC å›è´­ï¼‰',
                'tax4-desc4': 'Â· ä¸ºé¡¹ç›®åˆ›é€ é¢å¤–æ”¶ç›Š',
                'tax4-detail': 'ç¨æ”¶çš„ 50%ï¼ˆæ€»äº¤æ˜“é¢çš„ 1.5%ï¼‰',
                'tokenomics-payment-title': 'ä»˜è´¹ä½¿ç”¨æ¨¡å¼',
                'payment-desc': 'æœªæ¥å°†å¼€é€šéæŒå¸ç”¨æˆ·çš„ä»˜è´¹è®¢é˜…æœåŠ¡ã€‚æ‰€æœ‰ä»˜è´¹æ”¶å…¥å°†å…¨éƒ¨ç”¨äºé¡¹ç›®ç”Ÿæ€å‘å±•ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºåŠŸèƒ½å‡çº§ã€æŠ€æœ¯ä¼˜åŒ–ã€å¸‚åœºæ¨å¹¿ç­‰ï¼ŒæŒç»­æå‡ Alice AI çš„æœåŠ¡è´¨é‡ã€‚',
                'footer-title': 'å‡†å¤‡å¥½äº†å—ï¼Ÿ',
                'footer-desc': 'ç«‹å³å¼€å§‹ä½¿ç”¨ Alice AIï¼Œè®©å¥¹æˆä¸ºä½ çš„ä¸“å±åŠ å¯†è´§å¸åŠ©ç†',
                'footer-cta': 'å¼€å§‹ä½¿ç”¨ â†’'
            },
            en: {
                'tagline': 'Your Personal Crypto AI Assistant',
                'connect-wallet': 'ğŸ”— Connect Wallet',
                'wallet-address': 'Wallet Address: ',
                'token-balance': 'Alice Token: ',
                'bind-telegram': 'Bind Telegram',
                'start-now': 'Start Now â†’',
                'bind-title': 'Bind Your Telegram',
                'bind-your-code': 'Your Bind Code:',
                'copy-button': 'ğŸ“‹ Copy Code',
                'bind-step1': '1. Click the button below to open Telegram Bot',
                'bind-step2': '2. Send the bind code you just copied',
                'bind-step3': '3. Wait for Bot confirmation',
                'open-telegram': 'Open Telegram Bot â†’',
                'features-title': 'Core Features',
                'feature1-title': 'Personal AI Assistant',
                'feature1-desc': 'Exclusive Companion',
                'feature2-title': 'Continuous Memory',
                'feature2-desc': 'Remember Every Conversation',
                'feature3-title': 'Telegram Bot',
                'feature3-desc': 'âœ“ Ready',
                'feature4-title': 'WeChat Bot',
                'feature4-desc': 'Coming Soon',
                'feature5-title': 'Fully Intelligent',
                'feature5-desc': 'Private AI Assistant',
                'tiers-title': 'Service Tiers',
                'tier-bronze-price': 'Free',
                'tier-bronze-feat1': 'Basic Conversation',
                'tier-bronze-feat2': 'Simple Queries',
                'tier-bronze-feat3': 'Experience Alice',
                'tier-silver-price': 'Hold Tokens to Unlock',
                'tier-silver-feat1': 'Smart Price Monitoring (3 tasks)',
                'tier-silver-feat2': 'Multi-dimensional Intelligence',
                'tier-silver-feat3': 'AI Professional Advice',
                'tier-silver-feat4': 'News + Sentiment + Trends',
                'tier-gold-price': 'Coming Soon',
                'tier-gold-feat1': 'All Silver Features',
                'tier-gold-feat2': 'Fully Intelligent Private AI Assistant',
                'tier-gold-feat3': 'Daily In-depth AI Reports',
                'tier-gold-feat4': 'Lightning Response (2s)',
                'tier-gold-feat5': 'Unlimited Monitoring Tasks',
                'tier-diamond-price': 'Coming Soon',
                'tier-diamond-feat1': 'All Gold Features',
                'tier-diamond-feat2': 'Auto X (Twitter) Search',
                'tier-diamond-feat3': 'Real-time Investment Sentiment',
                'tier-diamond-feat4': 'X Real Long/Short Ratio',
                'tier-diamond-feat5': 'Technical Indicator Analysis',
                'tier-diamond-feat6': 'Fully Automated Trading',
                'tier-diamond-feat7': 'X Hotspot Push Notifications',
                'tier-diamond-feat8': 'More Features Coming Soon',
                'tokenomics-title': 'Token Economics',
                'token-coming-soon': 'Coming Soon',
                'tokenomics-tax-title': 'Transaction Tax (3%)',
                'tax1-title': 'Development Team Revenue',
                'tax1-detail': '10% of tax (0.3% of transaction)',
                'tax2-title': 'Project Operating Expenses',
                'tax2-desc': 'API keys, hardware, servers, and infrastructure',
                'tax2-detail': '15% of tax (0.45% of transaction)',
                'tax3-title': 'BTC Reserve Fund',
                'tax3-desc': 'Automatically purchase Bitcoin as long-term reserve',
                'tax3-detail': '25% of tax (0.75% of transaction)',
                'tax4-title': 'DeFi Strategy & Returns',
                'tax4-desc1': 'Â· DeFi Bot Auto Trading',
                'tax4-desc2': 'Â· Staking Dividend Mechanism',
                'tax4-desc3': 'Â· Manual Buyback (including BTC)',
                'tax4-desc4': 'Â· Generate Additional Revenue',
                'tax4-detail': '50% of tax (1.5% of transaction)',
                'tokenomics-payment-title': 'Paid Subscription Model',
                'payment-desc': 'We will offer paid subscriptions for non-token holders. All revenue will be reinvested in ecosystem development, including feature upgrades, technical optimization, and marketing to continuously improve Alice AI service quality.',
                'footer-title': 'Ready to Start?',
                'footer-desc': 'Start using Alice AI now and let her be your personal crypto assistant',
                'footer-cta': 'Get Started â†’'
            }
        };

        // Language switching
        function setLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Update HTML lang attribute
            document.documentElement.lang = lang === 'zh' ? 'zh-CN' : 'en';
        }

        // Mobile detection
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        // ========== Wallet extension detection ==========
        // Simple and reliable: check the global objects wallets inject
        function hasMetaMask() {
            return !!(window.ethereum?.isMetaMask);
        }
        function hasBinanceWallet() {
            return !!(window.binancew3w?.ethereum || window.BinanceChain || window.ethereum?.isBinance);
        }
        function hasOkxWallet() {
            return !!(window.okxwallet || window.okexchain);
        }
        // Any browser extension at all?
        function hasAnyWalletExtension() {
            return !!(window.ethereum || window.okxwallet || window.okexchain || window.BinanceChain || window.binancew3w);
        }

        // Get the best provider for a specific wallet type
        function getProvider(walletType) {
            if (walletType === 'metamask') {
                if (window.ethereum?.providers?.length) {
                    const found = window.ethereum.providers.find(p => p.isMetaMask);
                    if (found) return found;
                }
                if (window.ethereum?.isMetaMask) return window.ethereum;
            } else if (walletType === 'binance') {
                if (window.binancew3w?.ethereum) return window.binancew3w.ethereum;
                if (window.BinanceChain) return window.BinanceChain;
                if (window.ethereum?.isBinance) return window.ethereum;
            } else if (walletType === 'okx') {
                if (window.okxwallet) return window.okxwallet;
                if (window.okexchain) return window.okexchain;
            }
            // General fallback: any extension
            if (window.ethereum) return window.ethereum;
            return null;
        }

        // Deep link configurations (mobile only)
        const walletDeepLinks = {
            metamask: {
                url: `https://metamask.app.link/dapp/${window.location.host}${window.location.pathname}`,
                fallback: 'https://metamask.io/download/'
            },
            binance: {
                url: `bnc://app.binance.com/cedefi/web3-dapp?url=${encodeURIComponent(window.location.href)}`,
                fallback: 'https://www.binance.com/en/web3wallet'
            },
            okx: {
                url: `okex://main/dapp/details?dappUrl=${encodeURIComponent(window.location.href)}`,
                fallback: 'https://www.okx.com/download'
            },
            trust: {
                url: `trust://open_url?coin_id=20000714&url=${encodeURIComponent(window.location.href)}`,
                fallback: 'https://trustwallet.com/download'
            },
            tokenpocket: {
                url: `tpdapp://open?params=${encodeURIComponent(JSON.stringify({url: window.location.href, chain: 'BSC'}))}`,
                fallback: 'https://www.tokenpocket.pro/en/download/app'
            },
            imtoken: {
                url: `imtokenv2://navigate/DappView?url=${encodeURIComponent(window.location.href)}`,
                fallback: 'https://token.im/download'
            }
        };

        // Download links for desktop extension install prompts
        const walletDownloadLinks = {
            metamask: 'https://metamask.io/download/',
            binance: 'https://www.bnbchain.org/en/binance-wallet',
            okx: 'https://www.okx.com/web3',
            trust: 'https://trustwallet.com/browser-extension',
            tokenpocket: 'https://extension.tokenpocket.pro/',
            imtoken: 'https://token.im/download'
        };

        // Open wallet selector modal
        function connectWallet() {
            document.getElementById('walletSelectorTitle').textContent =
                currentLanguage === 'zh' ? 'é€‰æ‹©é’±åŒ…' : 'Select Wallet';
            document.getElementById('walletDividerText').textContent =
                currentLanguage === 'zh' ? 'æ›´å¤šé’±åŒ…' : 'More Wallets';

            // Update descriptions with detection status on desktop
            const mobile = isMobile();
            const isZh = currentLanguage === 'zh';
            const extLabel = isZh ? 'æµè§ˆå™¨æ‰©å±•' : 'Browser Extension';
            const qrLabel = isZh ? 'æ‰«ç è¿æ¥' : 'Scan QR Code';
            const appLabel = isZh ? 'å”¤èµ· App' : 'Open App';

            // Debug
            console.log('[Wallet Detection]',
                'ethereum:', !!window.ethereum,
                'isMetaMask:', !!window.ethereum?.isMetaMask,
                'okxwallet:', !!window.okxwallet,
                'BinanceChain:', !!window.BinanceChain,
                'binancew3w:', !!window.binancew3w,
                'hasAny:', hasAnyWalletExtension()
            );

            const descs = {};
            if (mobile) {
                // Mobile: all show "Open App"
                descs.metamask = descs.binance = descs.okx = appLabel;
                descs.trust = descs.tokenpocket = descs.imtoken = appLabel;
            } else {
                // Desktop: check each wallet, fallback to window.ethereum
                descs.metamask = (hasMetaMask() || hasAnyWalletExtension()) ? extLabel : qrLabel;
                descs.binance = (hasBinanceWallet() || hasAnyWalletExtension()) ? extLabel : qrLabel;
                descs.okx = (hasOkxWallet() || hasAnyWalletExtension()) ? extLabel : qrLabel;
                // Trust/TokenPocket/imToken: only show "extension" if window.ethereum exists
                descs.trust = hasAnyWalletExtension() ? extLabel : qrLabel;
                descs.tokenpocket = hasAnyWalletExtension() ? extLabel : qrLabel;
                descs.imtoken = hasAnyWalletExtension() ? extLabel : qrLabel;
            }
            document.querySelectorAll('[data-wallet-desc]').forEach(el => {
                const key = el.getAttribute('data-wallet-desc');
                if (descs[key]) el.textContent = descs[key];
            });

            document.getElementById('walletSelector').classList.add('active');
        }

        function closeWalletSelector() {
            document.getElementById('walletSelector').classList.remove('active');
        }

        // Handle wallet selection
        async function selectWallet(walletType) {
            closeWalletSelector();

            if (isMobile()) {
                await handleMobileWallet(walletType);
            } else {
                await handleDesktopWallet(walletType);
            }
        }

        // Desktop: try browser extension, or fallback to WalletConnect v2 QR
        async function handleDesktopWallet(walletType) {
            try {
                const provider = getProvider(walletType);

                if (provider) {
                    // Has extension â†’ connect directly
                    console.log('[Wallet] Connecting via browser extension for:', walletType);
                    await connectBrowserWallet(provider);
                } else {
                    // No extension â†’ WalletConnect v2 QR code
                    console.log('[Wallet] No extension, using WalletConnect v2 QR');
                    if (typeof window.connectWalletConnectV2 === 'function') {
                        await window.connectWalletConnectV2();
                    } else {
                        const downloadUrl = walletDownloadLinks[walletType];
                        alertNoExtension(walletType, downloadUrl);
                    }
                }
            } catch (error) {
                handleConnectionError(error);
            }
        }

        // Mobile: try deep link to open wallet app
        async function handleMobileWallet(walletType) {
            // Check if we're already inside a wallet's in-app browser
            if (window.ethereum) {
                try {
                    await connectBrowserWallet(window.ethereum);
                    return;
                } catch (e) {
                    console.log('In-app browser connection failed, trying deep link');
                }
            }

            const deepLink = walletDeepLinks[walletType];
            if (!deepLink) return;

            // Try deep link
            const startTime = Date.now();
            window.location.href = deepLink.url;

            // After 2.5s, if page is still visible, wallet app didn't open
            setTimeout(() => {
                if (Date.now() - startTime < 4000 && !document.hidden) {
                    const msg = currentLanguage === 'zh'
                        ? 'æœªæ£€æµ‹åˆ°è¯¥é’±åŒ… Appï¼Œæ˜¯å¦å‰å¾€ä¸‹è½½ï¼Ÿ'
                        : 'Wallet app not detected. Download it?';
                    if (confirm(msg)) {
                        window.open(deepLink.fallback, '_blank');
                    }
                }
            }, 2500);
        }

        // Track the active provider for switchToBSC
        let activeProvider = null;

        // Connect via browser extension
        async function connectBrowserWallet(provider) {
            activeProvider = provider;
            const accounts = await provider.request({ method: 'eth_requestAccounts' });
            account = accounts[0];
            web3 = new Web3(provider);
            await switchToBSC(provider);
            displayWalletInfo(account);
            await updateTokenBalance(account);

            // Listen for account/chain changes on this provider
            if (provider.on) {
                provider.on('accountsChanged', (accs) => {
                    if (accs.length === 0) {
                        document.getElementById('connectSection').classList.remove('hidden');
                        document.getElementById('walletInfo').classList.add('hidden');
                    } else {
                        account = accs[0];
                        displayWalletInfo(account);
                        updateTokenBalance(account);
                    }
                });
                provider.on('chainChanged', () => {
                    window.location.reload();
                });
            }
        }

        function alertNoExtension(walletType, downloadUrl) {
            const names = {
                metamask: 'MetaMask', binance: 'Binance Wallet', okx: 'OKX Wallet',
                trust: 'Trust Wallet', tokenpocket: 'TokenPocket', imtoken: 'imToken'
            };
            const name = names[walletType] || walletType;
            const msg = currentLanguage === 'zh'
                ? `æœªæ£€æµ‹åˆ° ${name} æµè§ˆå™¨æ‰©å±•ã€‚\n\nè¯·å®‰è£…æ‰©å±•ååˆ·æ–°é¡µé¢é‡è¯•ã€‚\n\nç‚¹å‡»"ç¡®å®š"å‰å¾€å®‰è£…é¡µé¢ã€‚`
                : `${name} browser extension not detected.\n\nPlease install the extension and refresh.\n\nClick "OK" to open the install page.`;
            if (confirm(msg)) {
                window.open(downloadUrl, '_blank');
            }
        }

        function handleConnectionError(error) {
            console.error('Wallet connection error:', error);
            let msg;
            if (error.message && error.message.includes('User rejected')) {
                msg = currentLanguage === 'zh' ? 'ç”¨æˆ·å–æ¶ˆäº†è¿æ¥è¯·æ±‚' : 'Connection request rejected';
            } else if (error.message && error.message.includes('Chain')) {
                msg = currentLanguage === 'zh' ? 'è¯·ç¡®ä¿é’±åŒ…å·²åˆ‡æ¢åˆ° BSC ä¸»ç½‘' : 'Please switch to BSC Mainnet';
            } else {
                msg = currentLanguage === 'zh' ? 'è¿æ¥å¤±è´¥ï¼Œè¯·é‡è¯•' : 'Connection failed, please try again';
            }
            alert(msg);
        }

        // Switch to BSC Network â€” uses the actual connected provider, not window.ethereum
        async function switchToBSC(provider) {
            if (!provider) provider = activeProvider || window.ethereum;
            if (!provider) return;

            try {
                const chainId = await web3.eth.getChainId();
                if (chainId === 56) return; // Already on BSC

                await provider.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: CONFIG.BSC_CHAIN_ID }],
                });
            } catch (switchError) {
                if (switchError.code === 4902) {
                    try {
                        await provider.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: CONFIG.BSC_CHAIN_ID,
                                chainName: 'Binance Smart Chain',
                                nativeCurrency: {
                                    name: 'BNB',
                                    symbol: 'BNB',
                                    decimals: 18
                                },
                                rpcUrls: [CONFIG.BSC_RPC_URL],
                                blockExplorerUrls: ['https://bscscan.com/']
                            }]
                        });
                    } catch (addError) {
                        console.error('Failed to add BSC chain:', addError);
                    }
                }
            }
        }

        // Display wallet info
        function displayWalletInfo(address) {
            document.getElementById('connectSection').classList.add('hidden');
            document.getElementById('walletInfo').classList.remove('hidden');
            
            // Format address
            const shortAddress = `${address.slice(0, 6)}...${address.slice(-4)}`;
            document.getElementById('address').textContent = shortAddress;
        }

        // Update token balance
        async function updateTokenBalance(address) {
            try {
                // TODO: Replace with actual token contract call
                // For now, show placeholder
                document.getElementById('balance').textContent = '0 (Contract not deployed yet)';
                
                // Actual implementation after contract is deployed:
                /*
                const tokenContract = new web3.eth.Contract(ERC20_ABI, CONFIG.TOKEN_CONTRACT);
                const balance = await tokenContract.methods.balanceOf(address).call();
                const decimals = await tokenContract.methods.decimals().call();
                const formattedBalance = (balance / Math.pow(10, decimals)).toFixed(2);
                document.getElementById('balance').textContent = formattedBalance;
                */
            } catch (error) {
                console.error('Error getting balance:', error);
                document.getElementById('balance').textContent = 'Error';
            }
        }

        // Generate bind code
        function generateBindCode() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let code = 'ALICE-';
            for (let i = 0; i < 4; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            code += '-';
            for (let i = 0; i < 4; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // Open bind modal
        function openBindModal() {
            if (!account) {
                alert(currentLanguage === 'zh' ? 
                    'è¯·å…ˆè¿æ¥é’±åŒ…ï¼' : 
                    'Please connect wallet first!');
                return;
            }

            const bindCode = generateBindCode();
            document.getElementById('bindCode').textContent = bindCode;
            document.getElementById('bindModal').style.display = 'block';

            // TODO: Send bind code to backend
            // Store the association: bindCode <-> wallet address
        }

        // Close bind modal
        function closeBindModal() {
            document.getElementById('bindModal').style.display = 'none';
        }

        // Copy bind code
        function copyBindCode() {
            const code = document.getElementById('bindCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert(currentLanguage === 'zh' ? 
                    'ç»‘å®šç å·²å¤åˆ¶ï¼ç°åœ¨å» Telegram ç²˜è´´å§ï¼' : 
                    'Bind code copied! Now paste it in Telegram!');
            });
        }

        // Open Telegram
        function openTelegram() {
            window.open(`https://t.me/${CONFIG.TELEGRAM_BOT}`, '_blank');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('bindModal');
            if (event.target == modal) {
                closeBindModal();
            }
        }

        // Re-request EIP-6963 after a brief delay (some extensions inject late)
        setTimeout(() => {
            window.dispatchEvent(new Event('eip6963:requestProvider'));
        }, 500);

        // QR Modal helpers
        function showQrModal() {
            document.getElementById('qrTitle').textContent =
                currentLanguage === 'zh' ? 'æ‰«ç è¿æ¥' : 'Scan to Connect';
            document.getElementById('qrDesc').textContent =
                currentLanguage === 'zh' ? 'è¯·ç”¨æ‰‹æœºé’±åŒ…æ‰«æäºŒç»´ç ' : 'Scan QR code with your mobile wallet';
            document.getElementById('qrLoading').textContent =
                currentLanguage === 'zh' ? 'æ­£åœ¨ç”ŸæˆäºŒç»´ç ' : 'Generating QR code';
            document.getElementById('qrImage').style.display = 'none';
            document.getElementById('qrLoading').style.display = 'block';
            document.getElementById('qrOverlay').classList.add('active');
        }

        function closeQrModal() {
            document.getElementById('qrOverlay').classList.remove('active');
            // If WC v2 is connecting, disconnect
            if (window._wcv2Disconnect) {
                window._wcv2Disconnect();
                window._wcv2Disconnect = null;
            }
        }

        function showQrImage(uri) {
            const img = document.getElementById('qrImage');
            img.src = 'https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=' + encodeURIComponent(uri);
            img.style.display = 'block';
            document.getElementById('qrLoading').style.display = 'none';
        }
    </script>

    <!-- WalletConnect v2 (ES Module via esm.sh) -->
    <script type="module">
        import { EthereumProvider } from "https://esm.sh/@walletconnect/ethereum-provider@2.17.0";

        window.connectWalletConnectV2 = async function() {
            showQrModal();

            try {
                const provider = await EthereumProvider.init({
                    projectId: 'a2e98dc7f5d6115dc0ffafed5f522fd3',
                    metadata: {
                        name: 'Alice AI',
                        description: 'Your Personal Crypto AI Assistant',
                        url: window.location.origin,
                        icons: [window.location.origin + '/alice-logo.png']
                    },
                    optionalChains: [56],
                    rpcMap: {
                        56: 'https://bsc-dataseed.binance.org/'
                    },
                    showQrModal: false
                });

                // Store disconnect function so closeQrModal can cancel
                window._wcv2Disconnect = () => {
                    try { provider.disconnect(); } catch(e) {}
                };

                // Show QR code when URI is ready
                provider.on('display_uri', (uri) => {
                    showQrImage(uri);
                });

                // Connect (waits for user to scan)
                await provider.connect();

                // Connected! Close QR modal
                document.getElementById('qrOverlay').classList.remove('active');
                window._wcv2Disconnect = null;

                // Initialize Web3 with WC provider
                window.web3 = new Web3(provider);
                window.account = provider.accounts[0];

                // Check chain
                if (provider.chainId !== 56) {
                    const msg = window.currentLanguage === 'zh'
                        ? 'è¯·åœ¨é’±åŒ…ä¸­åˆ‡æ¢åˆ° BSC ä¸»ç½‘ï¼'
                        : 'Please switch to BSC Mainnet in your wallet!';
                    alert(msg);
                }

                displayWalletInfo(window.account);
                await updateTokenBalance(window.account);

                // Events
                provider.on('accountsChanged', (accounts) => {
                    if (accounts.length === 0) {
                        document.getElementById('connectSection').classList.remove('hidden');
                        document.getElementById('walletInfo').classList.add('hidden');
                    } else {
                        window.account = accounts[0];
                        displayWalletInfo(window.account);
                        updateTokenBalance(window.account);
                    }
                });

                provider.on('disconnect', () => {
                    document.getElementById('connectSection').classList.remove('hidden');
                    document.getElementById('walletInfo').classList.add('hidden');
                });

            } catch (error) {
                document.getElementById('qrOverlay').classList.remove('active');
                if (error.message && !error.message.includes('User rejected')) {
                    console.error('WalletConnect v2 error:', error);
                    const msg = window.currentLanguage === 'zh'
                        ? 'è¿æ¥å¤±è´¥ï¼Œè¯·é‡è¯•'
                        : 'Connection failed, please try again';
                    alert(msg);
                }
            }
        };

        console.log('[WalletConnect v2] Module loaded, projectId: a2e98d...');
    </script>
</body>
</html>